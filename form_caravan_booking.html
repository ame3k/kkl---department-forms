<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>KKL-JNF Educational Caravans 2025 - Request Form</title>
    <!-- Font Awesome for better icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            color: #333;
        }

        .header {
            background-color: white;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .header h1 {
            color: #0E6C4D;
            margin-bottom: 20px;
        }

        .info-notice {
            background-color: #f5f5f5;
            padding: 15px;
            color: #0E6C4D;
            margin-bottom: 20px;
            border-left: 4px solid #0E6C4D;
            transition: background-color 0.3s ease;
        }
        
        .info-notice:hover {
            background-color: #eaf5f0;
        }

        .info-section {
            background-color: #f5f5f5;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 6px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        .info-section h2 {
            color: #0E6C4D;
            border-bottom: 2px solid #0E6C4D;
            padding-bottom: 8px;
            margin-top: 0;
        }
        
        .info-section h3 {
            color: #0E6C4D;
            margin-top: 20px;
        }

        .section-title {
            color: #006747;
            font-size: 18px;
            font-weight: bold;
            margin: 20px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid #006747;
        }

        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }

        .form-group {
            flex: 1;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .form-group input[type="text"],
        .form-group input[type="email"],
        .form-group input[type="tel"],
        .form-group input[type="date"],
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: #0E6C4D;
            box-shadow: 0 0 0 3px rgba(14, 108, 77, 0.1);
            outline: none;
        }

        .responsibilities {
            margin: 20px 0;
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 6px;
            border-left: 4px solid #0E6C4D;
        }

        .responsibilities-list {
            list-style: none;
            padding-left: 30px;
        }

        .responsibilities-list > li:before {
            font-family: 'Font Awesome 6 Free';
            content: '\f00c';
            font-weight: 900;
            position: absolute;
            left: -25px;
            color: #0E6C4D;
        }
        
        .responsibilities-list ul li:before {
            content: '';
        }

        .icon-header:before {
            font-family: 'Font Awesome 6 Free';
            content: '\f3c5';
            font-weight: 900;
            margin-right: 10px;
            color: #0E6C4D;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin: 10px 0;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        #otherCommitmentField {
            display: none;
            margin-top: 10px;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        textarea {
            width: 100%;
            min-height: 100px;
        }

        .submit-button {
            background-color: #006747;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
            transition: background-color 0.3s ease;
        }
        
        .submit-button:hover {
            background-color: #005239;
        }

        .example-text {
            font-style: italic;
            color: #666;
            margin: 10px 0;
            background-color: #f9f9f9;
            padding: 10px;
            border-radius: 4px;
        }
        
        .note {
            background-color: #f9f9f9;
            padding: 15px;
            border-left: 4px solid #0E6C4D;
            margin: 15px 0;
            border-radius: 4px;
        }
        
        .city-table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .city-table th, .city-table td {
            padding: 12px;
            border: 1px solid #eee;
        }
        
        .city-table th {
            background-color: #0E6C4D;
            color: white;
            text-align: left;
            font-weight: normal;
        }
        
        .city-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .city-table tr {
            transition: background-color 0.3s ease;
        }
        
        .city-table tr:hover {
            background-color: #f0f0f0;
        }
        
        .city-table input, .city-table select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }
        
        .table-actions {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }
        
        .add-city-btn, .remove-city-btn {
            display: inline-flex;
            align-items: center;
            background-color: #0E6C4D;
            color: white;
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .add-city-btn:hover {
            background-color: #005239;
        }
        
        .remove-city-btn {
            background-color: #e74c3c;
        }
        
        .remove-city-btn:hover {
            background-color: #c0392b;
        }
        
        .btn-icon {
            margin-right: 5px;
        }
        
        .info-box {
            background-color: #f9f9f9;
            border-left: 4px solid #0E6C4D;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        
        /* Animation for row addition/removal */
        @keyframes fadeInRow {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .new-row {
            animation: fadeInRow 0.3s ease-out;
        }
        
        @keyframes fadeOutRow {
            from {
                opacity: 1;
                transform: translateY(0);
            }
            to {
                opacity: 0;
                transform: translateY(-10px);
            }
        }
        
        .remove-row {
            animation: fadeOutRow 0.3s ease-out;
        }
        
        /* Delete button for city rows */
        .delete-city {
            background: none;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 18px;
            transition: color 0.3s;
        }
        
        .delete-city:hover {
            color: #c0392b;
        }

        /* GDPR Notice Styles */
        .gdpr-notice {
            border-left: 4px solid #006747;
            background-color: #f9f9f9;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        
        .gdpr-notice h3 {
            color: #006747;
            margin-top: 0;
            font-size: 18px;
            display: flex;
            align-items: center;
        }
        
        .gdpr-notice h3 i {
            margin-right: 10px;
        }
        
        .consent-section {
            margin-top: 20px;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 4px;
        }
        
        /* Other field styles */
        .other-field {
            display: none;
            margin-top: 10px;
            animation: fadeIn 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>KKL-JNF Educational Caravans 2025 - Request Form</h1>
    </div>

    <!-- GDPR Notice Section - ADDED AS REQUESTED -->
    <div class="gdpr-notice">
        <h3><i class="fas fa-shield-alt"></i> Data Protection</h3>
        <p>All collected data must be securely stored in compliance with GDPR regulations. Some details, such as contact information and accommodation preferences, may be shared with service providers like hotels for logistical arrangements. This must be clearly communicated to users in the form, and explicit consent should be obtained for data sharing.</p>
        
        <div class="consent-section">
            <h3>Consent for Data Sharing</h3>
            <p>To proceed with the registration, please confirm whether you agree to share the necessary details with service providers for seminar arrangements based on your needs.</p>
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="consentYes" name="dataConsent" value="yes" required>
                    <label for="consentYes">Yes</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="consentNo" name="dataConsent" value="no">
                    <label for="consentNo">No</label>
                </div>
            </div>
        </div>
    </div>
    <!-- End of GDPR Notice Section -->

    <div class="info-notice">
        <p><i class="fas fa-info-circle"></i> Before submitting a request, please read the following information carefully.</p>
    </div>

    <div class="info-section">
        <h2>General Information About the Educational Caravans</h2>
        <p>The Educational Caravans are a program operated by the Department for Strengthening Zionist Identity Overseas, designed to bring contemporary Israeli spirit to Jewish communities worldwide.</p>
        <p>Israeli Madrichim (young instructors) undergo specialized training and then travel to Jewish schools, youth movements, and community centers abroad. They conduct engaging activities that strengthen Zionist identity and deepen connections with Israel and KKL-JNF values.</p>
        <p>Each caravan explores Israel's geography, history, culture, and modern life, creating an immersive learning experience.</p>
        <p>A special focus is placed on the Tu BiShvat Caravan, highlighting the bond between the Jewish people and the land of Israel.</p>
        <p>In Iyar (the national month), the caravans emphasize the Zionist movement and the founding of the State of Israel.</p>

        <div class="responsibilities">
            <h3 class="icon-header">KKL-JNF Education Division (Israel) responsibilities:</h3>
            <ul class="responsibilities-list">
                <li>Recruiting and training Madrichim for the program.</li>
                <li>Providing educational materials for the caravans.</li>
                <li>Supplying gifts for children during the activities.</li>
                <li>Booking and covering the costs of flights (including approved internal flights).</li>
                <li>Allowing one extra baggage per caravan for educational materials and gifts.</li>
            </ul>

            <h3 class="icon-header">Local KKL-JNF responsibilities:</h3>
            <ul class="responsibilities-list">
                <li>Sending an official request letter from the local KKL-JNF President/Director to the Head of the Education and Community Division</li>
                <li>Submitting a written report with pictures after the program ends</li>
                <li>Coordinating and covering local expenses, including:
                    <ul style="list-style-type: disc; padding-left: 30px;">
                        <li style="position: relative; padding-left: 0; margin-bottom: 10px;">
                            Accommodation and meals
                        </li>
                        <li style="position: relative; padding-left: 0; margin-bottom: 10px;">
                            All transportation, including airport transfers
                        </li>
                    </ul>
                </li>
            </ul>
        </div>

        <h3 class="icon-header">Submission Guidelines:</h3>
        <ul class="responsibilities-list">
            <li>Forms and request letters must be submitted at least 100 days before the requested caravan date.</li>
            <li>Incomplete forms may result in processing delays.</li>
            <li>After submission, a representative will contact you for further coordination.</li>
        </ul>

        <div class="info-box">
            <p><i class="fas fa-users"></i> If your community is interested in hosting an Educational Caravan, please complete the form below.</p>
            <p><i class="fas fa-user-check"></i> This form must be completed by a KKL-JNF representative.</p>
            <p><i class="fas fa-clipboard-check"></i> Please ensure that all required information is provided accurately to facilitate the approval and coordination process.</p>
        </div>
    </div>

    <form id="caravanForm">
        <div class="section-title"><i class="fas fa-address-card"></i> General Information</div>
        
        <!-- Name row -->
        <div class="form-row">
            <div class="form-group">
                <label for="firstName">First Name *</label>
                <input type="text" id="firstName" name="firstName" required>
            </div>
            <div class="form-group">
                <label for="lastName">Last Name *</label>
                <input type="text" id="lastName" name="lastName" required>
            </div>
        </div>

        <!-- Role row -->
        <div class="form-row">
            <div class="form-group">
                <label for="role">Role in KKL-JNF *</label>
                <input type="text" id="role" name="role" required>
            </div>
        </div>

        <!-- Contact row -->
        <div class="form-row">
            <div class="form-group">
                <label for="phone">Phone Number *</label>
                <input type="tel" id="phone" name="phone" required>
            </div>
            <div class="form-group">
                <label for="email">Email Address *</label>
                <input type="email" id="email" name="email" required>
            </div>
        </div>

        <div class="section-title"><i class="fas fa-globe-americas"></i> Requested Country & City</div>
        <div class="info-box">
            <p><i class="fas fa-info-circle"></i> Please specify the country and city where the Educational Caravan will be conducting activities.</p>
        </div>
        
        <!-- Location row -->
        <div class="form-row">
            <div class="form-group">
                <label for="country">Country *</label>
                <input type="text" id="country" name="country" required>
            </div>
            <div class="form-group">
                <label for="city">City *</label>
                <input type="text" id="city" name="city" required>
            </div>
        </div>

        <div class="section-title"><i class="far fa-calendar-alt"></i> Requested Dates & Audiences</div>
        <div class="note">
            <p><i class="fas fa-exclamation-circle"></i> <strong>Important:</strong> Please enter the overall period for the entire caravan visit. If you wish to split the visit between multiple cities during this period, you can specify those details in the "Multiple Cities" section below.</p>
        </div>
        
        <div class="form-row">
            <div class="form-group">
                <label for="arrivalDate">Requested Date of arrival *</label>
                <input type="date" id="arrivalDate" name="arrivalDate" required>
            </div>
            <div class="form-group">
                <label for="departureDate">Requested Date of departure *</label>
                <input type="date" id="departureDate" name="departureDate" required>
            </div>
        </div>

        <div class="form-group">
            <label for="targetAudience">Who is the target audience for the Caravan program *</label>
            <select id="targetAudience" name="targetAudience" required>
                <option value="">Select target audience</option>
                <option value="kindergarten">Kindergarten (ages 3-5)</option>
                <option value="elementary">Elementary/Lower schools</option>
                <option value="middle">Middle Schools</option>
                <option value="high">High Schools</option>
                <option value="youth">Youth Movements</option>
                <option value="camps">Camps</option>
                <option value="college">College Students</option>
                <option value="community">Community Centers</option>
                <option value="synagogue">Synagogue</option>
                <option value="aged">Old Aged Homes</option>
                <option value="other">Other</option>
            </select>
            <div id="otherAudienceField" class="other-field">
                <input type="text" name="otherAudienceDetails" placeholder="Please specify other audience details">
            </div>
        </div>

        <div class="section-title"><i class="fas fa-map-marked-alt"></i> Requesting the program in multiple cities</div>
        <div class="info-box">
            <p><i class="fas fa-info-circle"></i> If you would like the caravan to visit multiple cities during the overall period specified above, please provide details below:</p>
        </div>
        
        <table class="city-table" id="cityTable">
            <thead>
                <tr>
                    <th>City Name</th>
                    <th>Arrival Date</th>
                    <th>Departure Date</th>
                    <th>Target Audience</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="cityTableBody">
                <tr>
                    <td><input type="text" name="multiCity1" placeholder="City name"></td>
                    <td><input type="date" name="multiArrival1"></td>
                    <td><input type="date" name="multiDeparture1"></td>
                    <td>
                        <select name="multiAudience1" class="audienceSelect">
                            <option value="">Select audience</option>
                            <option value="kindergarten">Kindergarten (ages 3-5)</option>
                            <option value="elementary">Elementary/Lower schools</option>
                            <option value="middle">Middle Schools</option>
                            <option value="high">High Schools</option>
                            <option value="youth">Youth Movements</option>
                            <option value="camps">Camps</option>
                            <option value="college">College Students</option>
                            <option value="community">Community Centers</option>
                            <option value="synagogue">Synagogue</option>
                            <option value="aged">Old Aged Homes</option>
                            <option value="other">Other</option>
                        </select>
                        <div class="other-field city-other-field">
                            <input type="text" name="otherCityAudience1" placeholder="Please specify audience">
                        </div>
                    </td>
                    <td><button type="button" class="delete-city" title="Remove city"><i class="fas fa-trash-alt"></i></button></td>
                </tr>
            </tbody>
        </table>
        
        <div class="table-actions">
            <button type="button" id="addCityBtn" class="add-city-btn">
                <i class="fas fa-plus btn-icon"></i> Add City
            </button>
            <button type="button" id="removeCityBtn" class="remove-city-btn">
                <i class="fas fa-minus btn-icon"></i> Remove Last City
            </button>
        </div>
        
        <div class="example-text">
            <i class="fas fa-lightbulb"></i> <strong>Example:</strong><br>
            City: Paris | Arrival: 01/05/2025 | Departure: 03/05/2025 | Audience: High school students<br>
            City: Lyon | Arrival: 04/05/2025 | Departure: 05/05/2025 | Audience: Elementary school students
        </div>
        
        <div class="note">
            <p><i class="fas fa-exclamation-triangle"></i> <strong>Note:</strong> Please ensure that the dates for all cities fall within the overall arrival and departure dates specified above.</p>
        </div>

        <div class="section-title"><i class="fas fa-handshake"></i> Local KKL-JNF commitment</div>
        <div class="form-group">
            <label>The Local KKL-JNF is committed to taking care of all the responsibilities mentioned in the opening description *</label>
            <div class="radio-group">
                <div class="radio-item">
                    <input type="radio" id="commitmentYes" name="commitment" value="yes" required>
                    <label for="commitmentYes">Yes</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="commitmentOther" name="commitment" value="other">
                    <label for="commitmentOther">Other</label>
                </div>
            </div>
            <div id="otherCommitmentField">
                <textarea name="otherCommitmentDetails" placeholder="Please specify other commitment details"></textarea>
            </div>
        </div>

        <div class="form-group">
            <label for="additionalInfo">Please write any specific requests, preferences, or additional information relevant to the program.</label>
            <textarea id="additionalInfo" name="additionalInfo"></textarea>
        </div>

        <button type="submit" class="submit-button"><i class="fas fa-paper-plane"></i> Submit Your Request</button>
    </form>

    <script>
        // Handle "Other" field for main target audience
        document.getElementById('targetAudience').addEventListener('change', function() {
            const otherField = document.getElementById('otherAudienceField');
            const input = otherField.querySelector('input');
            
            if (this.value === 'other') {
                otherField.style.display = 'block';
                input.required = true;
            } else {
                otherField.style.display = 'none';
                input.required = false;
                input.value = '';
            }
        });
        
        // Handle "Other" fields for city audiences
        function handleCityAudienceChange(select) {
            const parentCell = select.closest('td');
            const otherField = parentCell.querySelector('.city-other-field');
            const input = otherField.querySelector('input');
            
            if (select.value === 'other') {
                otherField.style.display = 'block';
                input.required = true;
            } else {
                otherField.style.display = 'none';
                input.required = false;
                input.value = '';
            }
        }
        
        // Initialize all existing audience selects
        document.querySelectorAll('.audienceSelect').forEach(select => {
            select.addEventListener('change', function() {
                handleCityAudienceChange(this);
            });
        });
        
        // Show/hide other commitment field with animation
        document.querySelectorAll('input[name="commitment"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const otherField = document.getElementById('otherCommitmentField');
                if (this.value === 'other') {
                    otherField.style.display = 'block';
                } else {
                    otherField.style.display = 'none';
                }
            });
        });
        
        // Add city row functionality with animation
        let cityRowCount = 1;
        document.getElementById('addCityBtn').addEventListener('click', function() {
            cityRowCount++;
            const newRow = document.createElement('tr');
            newRow.className = 'new-row';
            newRow.innerHTML = `
                <td><input type="text" name="multiCity${cityRowCount}" placeholder="City name"></td>
                <td><input type="date" name="multiArrival${cityRowCount}"></td>
                <td><input type="date" name="multiDeparture${cityRowCount}"></td>
                <td>
                    <select name="multiAudience${cityRowCount}" class="audienceSelect">
                        <option value="">Select audience</option>
                        <option value="kindergarten">Kindergarten (ages 3-5)</option>
                        <option value="elementary">Elementary/Lower schools</option>
                        <option value="middle">Middle Schools</option>
                        <option value="high">High Schools</option>
                        <option value="youth">Youth Movements</option>
                        <option value="camps">Camps</option>
                        <option value="college">College Students</option>
                        <option value="community">Community Centers</option>
                        <option value="synagogue">Synagogue</option>
                        <option value="aged">Old Aged Homes</option>
                        <option value="other">Other</option>
                    </select>
                    <div class="other-field city-other-field">
                        <input type="text" name="otherCityAudience${cityRowCount}" placeholder="Please specify audience">
                    </div>
                </td>
                <td><button type="button" class="delete-city" title="Remove city"><i class="fas fa-trash-alt"></i></button></td>
            `;
            document.getElementById('cityTableBody').appendChild(newRow);
            
            // Attach event listeners to the new row
            const newSelect = newRow.querySelector('.audienceSelect');
            newSelect.addEventListener('change', function() {
                handleCityAudienceChange(this);
            });
            
            // Attach delete event to the new delete button
            attachDeleteEvents();
        });

        // Remove last city row functionality with animation
        document.getElementById('removeCityBtn').addEventListener('click', function() {
            const rows = document.querySelectorAll('#cityTableBody tr');
            if (rows.length > 1) {
                const lastRow = rows[rows.length - 1];
                lastRow.classList.add('remove-row');
                
                // Wait for animation to complete before removing
                setTimeout(() => {
                    lastRow.remove();
                    cityRowCount--;
                }, 300);
            }
        });
        
        // Function to attach delete events to all delete buttons
        function attachDeleteEvents() {
            document.querySelectorAll('.delete-city').forEach(button => {
                button.addEventListener('click', function() {
                    const row = this.closest('tr');
                    row.classList.add('remove-row');
                    
                    // Wait for animation to complete before removing
                    setTimeout(() => {
                        row.remove();
                    }, 300);
                });
            });
        }
        
        // Initial attach of delete events
        attachDeleteEvents();

        // Form submission handling
        document.getElementById('caravanForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Check data consent
            if (!document.querySelector('input[name="dataConsent"]:checked')) {
                alert('Please indicate your consent for data sharing before proceeding');
                return;
            }
            
            // Check if "other" is selected for main audience but not specified
            if (document.getElementById('targetAudience').value === 'other') {
                const otherAudienceInput = document.querySelector('input[name="otherAudienceDetails"]');
                if (!otherAudienceInput.value.trim()) {
                    alert('Please specify the other audience type');
                    otherAudienceInput.focus();
                    return;
                }
            }
            
            // Check if "other" is selected for any city audience but not specified
            let otherCityAudienceValid = true;
            document.querySelectorAll('#cityTableBody tr').forEach((row) => {
                const audienceSelect = row.querySelector('.audienceSelect');
                if (audienceSelect && audienceSelect.value === 'other') {
                    const otherInput = row.querySelector('.city-other-field input');
                    if (!otherInput.value.trim()) {
                        alert('Please specify the other audience type for all cities');
                        otherInput.focus();
                        otherCityAudienceValid = false;
                        return;
                    }
                }
            });
            
            if (!otherCityAudienceValid) return;
            
            // Validate dates
            const arrivalDate = new Date(document.getElementById('arrivalDate').value);
            const departureDate = new Date(document.getElementById('departureDate').value);
            
            if (departureDate <= arrivalDate) {
                alert('Departure date must be after arrival date');
                return;
            }

            // Check if form was submitted at least 100 days before requested date
            const today = new Date();
            const daysDifference = Math.floor((arrivalDate - today) / (1000 * 60 * 60 * 24));
            
            if (daysDifference < 100) {
                alert('Forms must be submitted at least 100 days before the requested caravan date');
                return;
            }

            // Validate city dates (if provided)
            let cityDatesValid = true;
            const cityRows = document.querySelectorAll('#cityTableBody tr');
            
            cityRows.forEach((row) => {
                const cityArrival = new Date(row.querySelector('input[type="date"]:nth-of-type(1)').value);
                const cityDeparture = new Date(row.querySelector('input[type="date"]:nth-of-type(2)').value);
                
                if (cityArrival.toString() !== "Invalid Date" && cityDeparture.toString() !== "Invalid Date") {
                    // Check if city dates are within overall period
                    if (cityArrival < arrivalDate || cityDeparture > departureDate) {
                        alert('City dates must fall within the overall arrival and departure dates');
                        cityDatesValid = false;
                        return;
                    }
                    
                    // Check if departure is after arrival
                    if (cityDeparture <= cityArrival) {
                        alert('City departure date must be after city arrival date');
                        cityDatesValid = false;
                        return;
                    }
                }
            });
            
            if (!cityDatesValid) return;

            const formData = new FormData(this);
            const data = Object.fromEntries(formData);
            
            console.log('Form submitted with data:', data);
            alert('Form submitted successfully! A representative will contact you for further coordination.');
            this.reset();
            document.getElementById('otherCommitmentField').style.display = 'none';
            document.getElementById('otherAudienceField').style.display = 'none';
            document.querySelectorAll('.city-other-field').forEach(field => {
                field.style.display = 'none';
            });
        });
    </script>
